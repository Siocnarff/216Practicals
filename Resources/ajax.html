<html>
	<head>
		<meta charset="utf-8">
		<title>AJAX</title>
	</head>
	<body>
		<script>
			function ajax(album_id, callback)
			{
				var req = new XMLHttpRequest();
				req.onreadystatechange = function()
				{
					if(req.readyState == 4 && req.status == 200)
					{
						var json = JSON.parse(req.responseText);
						callback(json);
					}
				};
				
				req.open("GET", "https://cors-anywhere.herokuapp.com/https://api.deezer.com/album/"+album_id, true);
				
				// This is important for POST requests with data that is not submitted via a form.
				req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

				
				req.send();
			}
			function getDeezerChart(amount, callback) {
				var req = new XMLHttpRequest();
				req.onreadystatechange = function() {
				if(req.readyState == 4 && req.status == 200) {
					var json = JSON.parse(req.responseText);
						callback(json.data);
					}
				}
				req.open("GET", "https://cors-anywhere.herokuapp.com/https://api.deezer.com/chart/0/tracks");
				req.send();
			}
			function getData(album_id) {
			album_id = document.getElementById("album").value;
			ajax(album_id, function (data){
					document.getElementById("data").innerHTML = JSON.stringify(data, null, 4);	
					alert("Got Data for album: "+ data.title);
				});
			}
			function getChart(number) {
				getDeezerChart(5, function (data) {
					for(i = 0; i < number; i++)
					document.getElementById("chart").appendChild(document.createTextNode(JSON.stringify(data[i], null, 4)));
				})
			}
		</script>
		
		ID: <input id="album" placeholder="" value="302127" />
		<button onclick="getData(value);">Get Album Data</button>
		<button onclick="getChart(4);">Get Chart</button>
		<div><pre id="chart"></pre></div>
		<div><pre id="data"></pre></div>
	</body>
	
</html>